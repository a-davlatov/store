import{_ as h,M as f,a as y,s,f as g,g as p,q as e,D as u,k as r,O as _,t as x,m as w,B as i,J as d,U as v,V as k,W as P}from"./index-BWaPwz3E.js";const l=c=>(v("data-v-ddec2fc1"),c=c(),k(),c),D={class:"my-10"},S={class:"container"},V=l(()=>e("h1",{class:"text-2xl font-bold"},"Мои данные",-1)),T={class:"flex flex-col sm:flex-row mt-5 gap-8"},U={class:"w-40 h-40 avatar bg-sky-200 flex items-center justify-center"},I={class:"text-6xl text-white"},M={key:0,class:"justify-center message mb-8 text-base font-bold text-red-500 flex items-center gap-2"},N=l(()=>e("i",{class:"bi bi-x-octagon"},null,-1)),q={key:1,class:"justify-center message mb-8 text-base font-bold text-lime-400 flex items-center gap-2"},O=l(()=>e("i",{class:"bi bi-check-circle"},null,-1)),B={class:"grid md:grid-cols-2 gap-4 mb-8"},J=l(()=>e("label",{for:"name",class:"block text-sm font-medium leading-6 text-gray-900"}," Имя ",-1)),j={class:"mt-2"},E=l(()=>e("label",{for:"surname",class:"block text-sm font-medium leading-6 text-gray-900"}," Фамилия ",-1)),C={class:"mt-2"},W=l(()=>e("label",{for:"email",class:"block text-sm font-medium leading-6 text-gray-900"}," Эл. адрес ",-1)),z={class:"mt-2"},A=l(()=>e("label",{for:"phone",class:"block text-sm font-medium leading-6 text-gray-900"}," Телефон ",-1)),F={class:"mt-2"},G=l(()=>e("label",{for:"newPassword",class:"block text-sm font-medium leading-6 text-gray-900"}," Новый пароль (не заполняйте, чтобы оставить прежний) ",-1)),H={class:"mt-2"},K=l(()=>e("label",{for:"confirmPassword",class:"block text-sm font-medium leading-6 text-gray-900"}," Подтвердите новый пароль ",-1)),L={class:"mt-2"},Q=["disabled"],R={__name:"ProfileView",setup(c){const a=f({name:"",surname:"",email:"",phone:""}),n=f({newPassword:"",confirmPassword:""}),b=async()=>{if(s.clearMessages(),n.newPassword!==""||n.confirmPassword!==""){if(n.newPassword!==n.confirmPassword){s.errorText="Пароли не совпадают";return}a.password=n.newPassword}try{s.loading=!0;const{data:m}=await P(a),t=JSON.parse(localStorage.getItem("userData"));t.data=m,localStorage.setItem("userData",JSON.stringify(t)),s.userData=JSON.parse(localStorage.getItem("userData")),s.successText="Ваши данные успешно изменены"}catch(m){s.errorText="Ваши данные не были сохранены",console.error("Error: ",m.message)}finally{s.loading=!1,setTimeout(()=>{s.clearMessages()},5e3)}};return y(()=>{s.signedIn&&(a.name=s.userData.data.name,a.surname=s.userData.data.surname,a.email=s.userData.data.email,a.phone=s.userData.data.phone)}),(m,t)=>(g(),p("div",D,[e("div",S,[V,e("div",T,[e("div",U,[e("span",I,u(r(s).userData.data.name[0]),1)]),e("form",{class:"flex-1",onSubmit:_(b,["prevent"]),method:"POST"},[r(s).errorText!==""?(g(),p("div",M,[N,x(" "+u(r(s).errorText),1)])):w("",!0),r(s).successText!==""?(g(),p("div",q,[O,x(" "+u(r(s).successText),1)])):w("",!0),e("div",B,[e("div",null,[J,e("div",j,[i(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>a.name=o),id:"name",name:"name",type:"text",required:"",class:"px-3.5 block w-full border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 sm:text-sm sm:leading-6 focus:outline-none"},null,512),[[d,a.name]])])]),e("div",null,[E,e("div",C,[i(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>a.surname=o),id:"surname",name:"surname",type:"text",required:"",class:"px-3.5 block w-full border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 sm:text-sm sm:leading-6 focus:outline-none"},null,512),[[d,a.surname]])])]),e("div",null,[W,e("div",z,[i(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>a.email=o),id:"email",name:"email",type:"email",autocomplete:"email",required:"",class:"px-3.5 block w-full border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 sm:text-sm sm:leading-6 focus:outline-none"},null,512),[[d,a.email]])])]),e("div",null,[A,e("div",F,[i(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>a.phone=o),id:"phone",name:"phone",type:"tel",required:"",class:"px-3.5 block w-full border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 sm:text-sm sm:leading-6 focus:outline-none"},null,512),[[d,a.phone]])])]),e("div",null,[G,e("div",H,[i(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>n.newPassword=o),id:"newPassword",name:"newPassword",type:"password",autocomplete:"off",class:"px-3.5 block w-full border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 sm:text-sm sm:leading-6 focus:outline-none"},null,512),[[d,n.newPassword]])])]),e("div",null,[K,e("div",L,[i(e("input",{id:"confirmPassword",name:"confirmPassword",type:"password","onUpdate:modelValue":t[5]||(t[5]=o=>n.confirmPassword=o),autocomplete:"off",class:"px-3.5 block w-full border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 sm:text-sm sm:leading-6 focus:outline-none"},null,512),[[d,n.confirmPassword]])])])]),e("button",{disabled:!!r(s).loading,type:"submit",class:"w-full sm:max-w-40 text-center border transition border-black bg-white px-3 py-1.5 text-sm font-semibold leading-6 text-black shadow-sm hover:bg-black hover:text-white focus-visible:outline focus-visible:outline-1 focus-visible:outline-offset-2"},u(r(s).loading?"Загрузка":"Сохранить"),9,Q)],32)])])]))}},Y=h(R,[["__scopeId","data-v-ddec2fc1"]]);export{Y as default};
