import{L as b,M as _,N as w,s as t,a as h,e as y,f as d,g as c,q as e,k as r,t as n,D as m,m as v,O as k,B as u,J as g,i as N,j as V,P as D}from"./index-BWaPwz3E.js";const M={class:"flex min-h-full flex-1 flex-col justify-center px-6 py-12 lg:px-8"},S={class:"sm:mx-auto sm:w-full sm:max-w-sm"},T=e("h2",{class:"mt-10 text-center text-xl sm:text-2xl font-bold leading-9 tracking-tight text-gray-900"},"Вход в аккаунт",-1),B={key:0,class:"message mt-8 -mb-8 text-base font-bold text-red-500 flex items-center gap-2"},O=e("i",{class:"bi bi-x-octagon"},null,-1),I={class:"mt-10 sm:mx-auto sm:w-full sm:max-w-sm"},L=e("label",{for:"email",class:"block text-sm font-medium leading-6 text-gray-900"}," Эл. адрес ",-1),j={class:"mt-2"},q=e("label",{for:"password",class:"block text-sm font-medium leading-6 text-gray-900"}," Пароль ",-1),C={class:"mt-2"},J=["disabled"],R={class:"mt-10 text-center text-sm text-gray-500"},E={__name:"LoginView",setup(U){const x=b(),s=_({email:"",password:""}),p=async()=>{t.clearMessages(),t.loading=!0;try{const o={email:s.email,password:s.password},a=await D(o);t.signedIn=!0,localStorage.setItem("userData",JSON.stringify(a.data)),t.userData=JSON.parse(localStorage.getItem("userData")),x.push("/")}catch(o){if(o.message==="Network Error"){t.errorText="Проверьте подключение к сети и попробуйте еще раз",console.error("An error accured: ",o.message);return}t.errorText="Неверный логин или пароль",console.error("An error accured: ",o.message)}finally{i(),t.loading=!1}},i=()=>{s.email="",s.password=""};return w(()=>{t.drawerOpen=!1}),h(()=>{t.clearMessages(),i()}),(o,a)=>{const f=y("RouterLink");return d(),c("div",M,[e("div",S,[T,r(t).errorText!==""?(d(),c("div",B,[O,n(" "+m(r(t).errorText),1)])):v("",!0)]),e("div",I,[e("form",{class:"space-y-6",onSubmit:k(p,["prevent"]),method:"POST"},[e("div",null,[L,e("div",j,[u(e("input",{"onUpdate:modelValue":a[0]||(a[0]=l=>s.email=l),id:"email",name:"email",type:"email",autocomplete:"email",required:"",class:"px-3.5 block w-full border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 sm:text-sm sm:leading-6 focus:outline-none"},null,512),[[g,s.email]])])]),e("div",null,[q,e("div",C,[u(e("input",{"onUpdate:modelValue":a[1]||(a[1]=l=>s.password=l),id:"password",name:"password",type:"password",autocomplete:"current-password",required:"",class:"px-3.5 block w-full border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 sm:text-sm sm:leading-6 focus:outline-none"},null,512),[[g,s.password]])])]),e("div",null,[e("button",{disabled:!!r(t).loading,type:"submit",class:"flex w-full justify-center border transition border-black bg-white px-3 py-1.5 text-sm font-semibold leading-6 text-black shadow-sm hover:bg-black hover:text-white focus-visible:outline focus-visible:outline-1 focus-visible:outline-offset-2"},m(r(t).loading?"Загрузка":"Войти"),9,J)])],32),e("p",R,[n(" Впервые здесь? "),N(f,{to:"/register",class:"font-semibold leading-6 text-orange-400 hover:text-orange-600"},{default:V(()=>[n(" Зарегистрироваться ")]),_:1})])])])}}};export{E as default};
